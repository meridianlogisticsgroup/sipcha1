<!doctype html>
<html lang="en" x-data="{ dark: (localStorage.theme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light'))==='dark' }"
      x-init="document.documentElement.classList.toggle('theme-dark', dark);
              $watch('dark', v => { document.documentElement.classList.toggle('theme-dark', v); localStorage.theme = v ? 'dark':'light'; })">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sign in</title>
  <link href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css" rel="stylesheet"/>
  <link href="{{ url_for('static', filename='ui.css') }}" rel="stylesheet"/>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body style="display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--bg);">
  <form method="post" action="{{ url_for('login', next=request.args.get('next')) }}" class="panel" style="width:380px">
    <div class="panel-header">Sign in</div>
    <div class="panel-body">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="badge {{ 'badge--red' if category=='error' else 'badge--green' }}" style="display:inline-block;margin-bottom:10px">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      <div class="mb-2">
        <label class="form-label" style="display:block;margin-bottom:6px;color:var(--text-muted)">Email</label>
        <input class="btn" style="width:100%; background:#fff" type="email" name="email" value="{{ email or '' }}" placeholder="you@domain.com" required />
      </div>
      <div class="mb-2">
        <label class="form-label" style="display:block;margin-bottom:6px;color:var(--text-muted)">Password</label>
        <input class="btn" style="width:100%; background:#fff" type="password" name="password" placeholder="••••••••" required />
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <button class="btn btn-primary" type="submit"><i class="ti ti-login"></i> Sign in</button>
        <button class="btn" type="button" @click="dark=!dark"><i :class="dark ? 'ti ti-moon-stars' : 'ti ti-sun'"></i></button>
      </div>
      <div class="text-muted" style="margin-top:10px;font-size:12px">Demo: admin@sipcha.io / admin123</div>
    </div>
  </form>
</body>
</html>
